<DModal
  @closeModal={{@closeModal}}
  class="chat-modal-create-channel"
  @inline={{@inline}}
  @title={{i18n "chat.create_channel.title"}}
  @flash={{this.flash}}
  @tagName="form"
  {{on "submit" this.onSave}}
>
  <:body>
    <div class="chat-modal-create-channel__control -name">
      <label for="name" class="chat-modal-create-channel__label">
        {{i18n "chat.create_channel.name"}}
      </label>
      <Input
        name="name"
        class="chat-modal-create-channel__input"
        @type="text"
        @value={{this.name}}
        {{on "input" (with-event-value this.onNameChange)}}
      />
    </div>

    <div class="chat-modal-create-channel__control -slug">
      <label for="slug" class="chat-modal-create-channel__label">
        {{i18n "chat.create_channel.slug"}}&nbsp;
        <span>
          {{d-icon "info-circle"}}
          <DTooltip>
            {{i18n "chat.channel_edit_name_slug_modal.slug_description"}}
          </DTooltip>
        </span>
      </label>
      <Input
        name="slug"
        class="chat-modal-create-channel__input"
        @type="text"
        @value={{this.slug}}
        placeholder={{this.autoGeneratedSlug}}
      />
    </div>

    <div class="chat-modal-create-channel__control -description">
      <label for="description" class="chat-modal-create-channel__label">
        {{i18n "chat.create_channel.description"}}
      </label>
      <Input
        name="description"
        class="chat-modal-create-channel__input"
        @type="textarea"
        @value={{this.description}}
      />
    </div>

    <div class="chat-modal-create-channel__control">
      <label class="chat-modal-create-channel__label">
        {{i18n "chat.create_channel.choose_category.label"}}
      </label>
      <CategoryChooser
        @value={{this.categoryId}}
        @onChange={{this.onCategoryChange}}
        @options={{hash
          formName="chatable_id"
          none="chat.create_channel.choose_category.none"
        }}
      />

      {{#if this.categoryPermissionsHint}}
        <div
          class={{concat-class
            "chat-modal-create-channel__hint"
            (if this.loadingPermissionHint "loading-permissions")
          }}
        >
          {{this.categoryPermissionsHint}}
        </div>
      {{/if}}
    </div>

    {{#if this.autoJoinAvailable}}
      <div class="chat-modal-create-channel__control -auto-join">
        <label class="chat-modal-create-channel__label">
          <Input
            name="auto_join_users"
            @type="checkbox"
            @checked={{this.autoJoinUsers}}
          />
          <div class="auto-join-channel">
            <span class="chat-modal-create-channel__label-title">
              {{i18n "chat.settings.auto_join_users_label"}}
            </span>
            <p class="chat-modal-create-channel__label-description">
              {{#if this.categoryName}}
                {{i18n
                  "chat.settings.auto_join_users_info"
                  category=this.categoryName
                }}
              {{else}}
                {{i18n "chat.settings.auto_join_users_info_no_category"}}
              {{/if}}
            </p>
          </div>
        </label>
      </div>
    {{/if}}

    <div class="chat-modal-create-channel__control -threading-toggle">
      <label class="chat-modal-create-channel__label">
        <Input
          name="threading_enabled"
          @type="checkbox"
          @checked={{this.threadingEnabled}}
        />
        <div class="threading-channel">
          <span class="chat-modal-create-channel__label-title">
            {{i18n "chat.create_channel.threading.label"}}
          </span>
          <p class="chat-modal-create-channel__label-description">
            {{i18n "chat.settings.channel_threading_description"}}
          </p>
        </div>
      </label>
    </div>
  </:body>
  <:footer>
    <button
      class="btn btn-primary create"
      disabled={{this.createDisabled}}
      type="submit"
    >
      {{i18n "chat.create_channel.create"}}
    </button>
  </:footer>
</DModal>